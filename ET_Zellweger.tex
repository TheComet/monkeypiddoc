%\documentclass{fhnwreport} %
%\usepackage[ngerman]{babel}
%\usepackage[T1]{fontenc}	
%\usepackage[latin1]{inputenc}
%\usepackage{tikz}
%\usepackage{amsmath}
%\usetikzlibrary{arrows}
%\usepackage{lmodern}   %Type1-Schriftart für nicht-englische Texte 
%\bibliographystyle{IEEEtran}
%
%\usepackage{listings}
%\lstset{language=Matlab}
%
%\usepackage{cite}
%\usepackage{hyperref}
%%\usepackage{url}
%\hypersetup{
     %colorlinks   = true,
     %urlcolor    = black
%}
%
%% Farben für Matlab-Listings
%\definecolor{hellgelb}{rgb}{1,1,0.85}     % Hintergrundfarbe
%\definecolor{colKeys}{RGB}{0,0,255}       % blau
%\definecolor{colIdentifier}{RGB}{0,0,0}	  % schwarz
%\definecolor{colComments}{RGB}{34,139,34} % gruen
%\definecolor{colString}{RGB}{160,32,240}  % violett
%
%\lstset{%
    %language=Matlab,%
    %%backgroundcolor={\color{hellgelb}},%
		%backgroundcolor={},%
    %basicstyle={\footnotesize\ttfamily},%
    %breakautoindent=true,%
    %breakindent=10pt,%
    %breaklines=true,%
    %captionpos=t,%
    %columns=fixed,%
    %%commentstyle={\itshape\color{colComments}},%
		%commentstyle={\color{colComments}},
    %extendedchars=true,%
    %float=hbp,%
    %frame=single,%
    %framerule=1pt,%
    %identifierstyle={\color{colIdentifier}},%
    %keywordstyle={\color{colKeys}},%
    %numbers=left,%
    %numbersep=1em,%
    %numberstyle={\tiny\ttfamily},%
    %showspaces=false,%
    %showstringspaces=false,%
    %stringstyle={\color{colString}},%
    %tabsize=4,%
    %xleftmargin=1em,%
    %xrightmargin=1em%
%} 
%\begin{document}
\subsection{Zellweger Methode}\label{ZellwegerMethode}


Der PI- oder PID-Regler wird aus dem Amplituden- und Phasengang mit der Phasengang-Methode nach Zellweger berechnet. Der Amplituden- und 
Phasengang kann aus der Übertragungsfunktion $H(s)$ (Formel \eqref{eq:ÜbertragungsfunktionStrecke}) berechnet werden. 
Folgend werden die dazu verwendeten Formeln aufgeführt:

\[ %\label{Amplitudengang}
\text{Amplitudengang Strecke}~A_{S}(\omega)= Ks\cdot\prod\limits_{m=1}^Z\frac{1}{\sqrt{1+{(\omega\cdot T_{m})}^{2}}}
\]

\[ %\label{Phasengang}
\text{Phasengang Strecke}~\phi_{S}(\omega)=-1\cdot\sum\limits_{m=1}^Z\arctan \left( \omega\cdot T_{m}\right)
\]

Gemäss Zellweger wird nun nach folgendem Rezept vorgegangen:

\textbf{1.} Aus dem Phasengang $\phi_{S}$ wird die Frequenz bei einem bestimmten Winkel $\phi_{x}$ herausgesucht. Der Winkel $\phi_{x}$ ist abhängig davon, welcher Regler-Typ dimensioniert werden soll. Beim I-Regler ist $\phi_{I}$ -45\textdegree, beim PI-Regler ist $\phi_{PI}$ -90\textdegree und beim PID-Regler ist $\phi_{PID}$ -135\textdegree. 

Gemäss dem Skript \glqq Regelkreise und Regelung\grqq\cite{Zellweger}
von Zellweger gibt es für die Regler zwei Darstellungsvarianten: Die reglerkonforme und die bodekonforme Darstellung.

Bei den weiteren Berechnungen des PID-Reglers muss für die 
Phasengang-Methode nach Zellweger in die bodekonforme Darstellung gewechselt werden (siehe Anhang Seite \pageref{Bodekonf} Kapitel \ref{Bodekonf}).

Für PI- und PID-Regler unterscheidet sich das weitere Vorgehen. Es ist in die folgenden zwei Kapitel aufgeteilt.

\textbf{Weiteres Vorgehen PI Regler:}

Die gefundene Frequenz $\omega_{PI}$ bei $phi_{PI}$ 
entspricht $1/Tn$. 

\[
Tn=\frac{1}{\omega_{PI}}
\]

\textbf{2.} Mit dem gefundenen $Tn$ und $Kr=1$ wird der Amplituden- und 
Frequenzgang des offenen Regelkreises $(G_{O})$ berechnet. Das heisst Regler $G_{R}(s)$ 
und Strecke $G_{S}(s)$ in Serie, aber ohne Rückkoppelung.\\

 
%\[
%\text{Übertragungsfunktion PI-Regler (Reglerkonform)}~Gr=Kr\cdot 
%\left[ 1+\frac{1}{s\cdot Tn} \right]
%\]
\begin{center}
Übertragungsfunktion PI-Regler (Reglerkonform) $G_{R}(s)$ siehe Formel \eqref{eq:PITransmit}

%\[
%\text{Übertragungsfunktion PI-Regler (Bodekonform)}~Gr=Kr\cdot 
%\frac{1+s\cdot Tn}{s\cdot Tn}
%\]
Übertragungsfunktion PI-Regler (Bodekonform) $G_{R}(s)$ siehe Formel \eqref{eq:PITransmitBode}
\end{center}

\[
\text{Phasengang PI-Regler}~\phi_{R}=\arctan \left( \omega\cdot Tn 
\right)-\frac{\pi}{2}
\]

\[
\text{Amplitudengang PI-Strecke}~A_{R}=\, Kr\frac{\sqrt {1+{(\omega\cdot 
Tn)}^{2}} }{\omega\cdot Tn}
\]


\[
\text{Phasengang Regelkreis offen}~\phi_{O}=\, 
\phi_{S}+\phi_{R}\, 
\]

\[
\text{Amplitudengang Regelkreis offen}~A_{ 
O}=A_{S}\cdot A_{R}
\]

\textbf{3.} Jetzt wird abhängig vom gewünschten Überschwingen 
des Reglers ein Winkel auf dem Phasengang des offenen Regelkreises gesucht. 
Folgende Tabelle zeigt den Zusammenhang des für die Dimensionierung 
gewählten Überschwingens und des dazu gehörenden Winkels.

\begin{table}[h]

\centering
	\begin{tabular}{|p{106pt}|r|r|r|}
	\hline
	Dämpfmass d & $\phi_{Rand}$ & $\phi_{Strecke}$ & Überschwingen \\
	\hline
	0.42 & 45\textdegree & -135\textdegree & 23.3\% \\
	\hline
	0.5 & 51.5\textdegree & -128.5\textdegree & 16.3\% \\
	\hline
	0.7 & 65.5\textdegree & -114.6\textdegree & 4.6\% \\
	\hline
	1 & 76.3\textdegree & -103.7\textdegree & 0\% \\
	\hline
	\end{tabular}
	\caption{Phasenwinkel abhängig vom gewünschten Überschwingen}
	\label{table:TabÜberschwingen}
\end{table}


Bei 0\% Überschwingen muss beispielsweise der Winkel $\phi_{Strecke}$ 
gleich -103.7\textdegree ~auf dem Phasengang gesucht werden. Bei der 
gefundenen Frequenz wird der dazu gehörende Wert aus dem Amplitudengang 
des offenen Regelkreises herausgelesen. Um diesen Faktor muss die 
Verstärkung des Reglers vermindert werden. Der aus dem Amplitudengang 
herausgelesene Wert mit (-1) multipliziert ergibt also den Regler-Parameter 
$Kr$.\\

\textbf{Variante I Regler:}
Beim I Regler entspricht $\omega_I$  bei $\phi_I$ direkt dem Kehrwert des Parameters des I Reglers:

\[
Ti = \frac{1}{\omega_I}
\]

Damit ist die Berechnung des I-Reglers abgeschlossen. Die weiteren Schritte entfallen für den I-Regler.

\textbf{Weiteres Vorgehen PID Regler:}

Beim PID-Regler wird analog zum beim PI-Regler beschriebenen Vorgehen 
gerechnet. Die gefundene Frequenz $\omega_{PID}$ für $\phi_{PID}$ 
$=$ -135\textdegree ~entspricht aber nicht direkt $1/Tn$ wie beim PI-Regler.

Die Zellweger'sche Phasengang-Methode berechnet beim PID-Regler $Tnk$, $Tvk$ und 
$Krk$. Dies sind Parameter in der bodekonformen Darstellung. Diese Parameter 
können schliesslich wieder in die Parameter $Tn$, $Tv$ und $Kr$ der 
reglerkonformen Darstellung umgerechnet werden.

\textbf{2.} Für die Berechnung von $Tnk$ und $Tvk$ wird ein Parameter $\beta$ 
benötigt. Folgend wird die Berechnung davon aufgeführt:

\[
\frac{2\cdot \beta}{1+\beta^{2}}-w_{PID} \cdot  \sum \limits_{m=1}^{n} \frac{T_m}{1+ (w_{PID} \cdot T_m)^2} =-0.5
\]

Folgendes wird mit $Z$ substituiert:

\[
Z=\frac{2\cdot \beta}{1+\beta^{2}}
\]

\[
Z=w_{PID} \cdot  \sum \limits_{m=1}^{n} \frac{T_m}{1+ (w_{PID} \cdot T_m)^2} -0.5
\]

$\beta$ kann nun durch folgende Gleichung beschrieben werden:

\[
\beta = \frac{1}{Z} - \sqrt{\frac{1}{Z^2}-1}
\]

$\beta$ muss zwischen 0 und 1 liegen. Damit es keine komplexen Lösungen 
gibt, wird $\beta$ für $Z$ \textgreater 1 gleich 1. Für eine detaillierte Herleitung von $\beta$ siehe Anhang \ref{ZellwegerBeta}.

\textbf{3.} $Tnk$ und $Tvk$ können nun wie folgt mit $\beta$ berechnet werden:

\[
\frac{1}{Tnk}=\omega_{PID}\cdot \beta
\]

\[
\frac{1}{Tvk}=\frac{\omega_{PID}}{\beta}
\]

\textbf{4.} Für die Berechnung des Dämpfungsfaktors $Krk$ muss beim 
PID-Regler folglich die Formel der Übertragungsfunktion \eqref{eq:ÜbertragungsfunktionStrecke} des PID-Reglers 
verwendet werden. Der Regler-Parameter $Tp$ wird benötigt, weil der Regler 
nicht über eine unendlich kurze Zeit differenzieren kann. $1/Tp$ muss ca. 
1 Dekade höher als $1/Tvk$ gewählt werden. Beim PID-Regler wird die bodekonforme Darstellung verwendet, weil $Tnk$ und $Tvk$ vorhanden sind, $Tn$ und $Tk$ jedoch noch nicht. Eine genauere Erläuterung dieser ist im Anhang Seite \pageref{Bodekonf} Kapitel \ref{Bodekonf} zu finden. Für die Berechnung des Amplitudenganges wird $Krk=1$ verwendet: 

\[
\frac{1}{Tp}=10\cdot \frac{1}{Tnk}
\]\\


\begin{center}
%\[
%\text{Übertragungsfunktion PID-Regler (Reglerkonform)}~Gr=Kr\cdot \left[ 
%1+\frac{1}{s\cdot Tn}+\frac{s\cdot Tv}{1+s\cdot Tp} \right]
%\]
Übertragungsfunktion PID-Regler (Reglerkonform) $G_{R}(s)$ siehe Formel \eqref{eq:PIDTransmit}

%\[
%\text{Übertragungsfunktion PID-Regler (Bodekonform)}~Gr=Krk\cdot \left[ 
%\frac{\left( 1+s\cdot Tnk \right)\cdot (1+s\cdot Tvk)}{s\cdot Tnk\cdot (1+s\cdot 
%Tp)} \right]
%\]
Übertragungsfunktion PID-Regler (Bodekonform) $G_{R}(s)$ siehe Formel \eqref{eq:PIDTransmitBode}
\end{center}

\[
\text{Phasengang PID-Regler}~\phi_{R}=\arctan {\left( \omega\cdot Tnk 
\right)+arctan\left(\omega\cdot Tvk \right)-\mathrm{arctan}(\omega\cdot 
Tp)}-\frac{\pi}{2}
\]

\[
\text{Amplitudengang PID-Regler}~A_{R}=\, Krk\frac{\sqrt {1+\left( 
\omega\cdot Tnk \right)^{2}} \cdot \sqrt {1+{(\omega\cdot Tvk)}^{2}} }{\omega\cdot Tnk}
\]

\[
\text{Phasengang Regelkreis offen}~\phi_{O}=\, 
\phi_{S}+\phi_{R}\, 
\]

\[
\text{Amplitudengang Regelkreis offen}~A_{ 
o}=A_{S}\cdot A_{R}
\]

\textbf{5.} Abhängig vom gewählten Überschwingen wird wiederum ein Winkel auf dem Phasengang $\phi_{o}$ gesucht (Siehe Tabelle \ref{table:TabÜberschwingen} Seite \pageref{table:TabÜberschwingen}). Die Amplitude bei diesem Winkel mit (-1) multipliziert, ergibt $Krk$.

%\end{document}